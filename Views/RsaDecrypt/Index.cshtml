@{
    ViewData["Title"] = "RSA Şifre Çözme";
    bool isDecrypted = !string.IsNullOrEmpty(ViewBag.DecryptedText as string);
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
    body {
        background-color: #000;
        color: #00bfff;
        font-family: 'Orbitron', 'Courier New', monospace;
    }

    .section-title {
        text-align: center;
        font-size: 2.3rem;
        color: #ffd700;
        margin-bottom: 1rem;
        margin-top: 1rem;
        text-shadow: 0 0 10px #ffd700;
    }

    .text-muted {
        color: #b0cbd6 !important;
        text-align: center;
        margin-bottom: 2rem;
    }

    .neon-box {
        background: rgba(0, 255, 255, 0.03);
        border: 2px solid #00bfff;
        border-radius: 1.5rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 0 15px rgba(0, 191, 255, 0.2);
    }

    textarea.form-control {
        background-color: rgba(0, 255, 255, 0.03) !important;
        border: 2px solid #00bfff;
        border-radius: 1rem;
        padding: 1rem;
        color: #bffcff;
        font-family: 'Courier New', monospace;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        box-shadow: inset 0 0 10px rgba(0, 191, 255, 0.1);
    }

        textarea.form-control:focus {
            outline: none;
            background-color: rgba(0, 255, 255, 0.08) !important;
            box-shadow: 0 0 15px #00bfff, inset 0 0 10px rgba(0, 255, 255, 0.3);
            color: #ffffff;
        }

    .form-label {
        color: #bdeeff;
        font-weight: bold;
        font-size: 1rem;
        margin-bottom: 0.5rem;
    }

    .btn-neon {
        border: 2px solid #00bfff;
        border-radius: 30px;
        background: transparent;
        color: #00bfff;
        padding: 0.6rem 1.6rem;
        font-weight: bold;
        text-decoration: none;
        transition: all 0.3s ease;
    }

        .btn-neon:hover {
            background: #00bfff;
            color: #000;
            box-shadow: 0 0 12px #00bfff;
        }

    .btn-copy {
        border: 2px solid #00bfff;
        border-radius: 1rem;
        background-color: transparent;
        color: #00d9ff;
        padding: 0.5rem 1.2rem;
        font-weight: bold;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        box-shadow: 0 0 10px rgba(0, 191, 255, 0.2);
    }

        .btn-copy i {
            font-size: 1.2rem;
        }

        .btn-copy:hover {
            background-color: #00d9ff;
            color: #000;
            box-shadow: 0 0 15px #00d9ff;
        }
</style>

<!-- Başlık -->
<section class="text-center mb-4">
    <h2 class="section-title">🔓 RSA Şifre Çözme</h2>
    <p class="text-muted">Private key kullanarak şifrelenmiş metni çöz.</p>
</section>

<form method="post" class="container" style="max-width: 800px;">
    <div class="neon-box">
        <label class="form-label">🔐 Şifrelenmiş Metin</label>
        <textarea name="encryptedText" class="form-control" rows="@(isDecrypted ? "3" : "5")">@ViewBag.EncryptedText</textarea>
    </div>

    <div class="neon-box">
        <label class="form-label">🔑 Private Key</label>
        <textarea name="base64PrivateKey" class="form-control" rows="@(isDecrypted ? "3" : "5")">@ViewBag.PrivateKey</textarea>
    </div>

    <div class="d-flex justify-content-center gap-4 mb-4">
        <a href="/" class="btn-neon">⬅️ Ana Sayfa</a>
        <button type="submit" class="btn-neon">🔓 Çöz</button>
    </div>
</form>

@if (isDecrypted)
{
    <div class="container mt-5 neon-box" style="max-width: 800px;">
        <h5 class="form-label">📝 Çözülen Metin</h5>
        <div class="input-group">
            <textarea id="decryptedText" class="form-control" rows="4" readonly>@ViewBag.DecryptedText</textarea>
            <button type="button" class="btn-copy ms-2" onclick="copyToClipboard('decryptedText')">
                <i class="fas fa-copy"></i> Kopyala
            </button>
        </div>
    </div>
}

@if (!string.IsNullOrEmpty(ViewBag.Error as string))
{
    <div class="alert alert-danger mt-4">@ViewBag.Error</div>
}

@section Scripts {
    <script>
        function copyToClipboard(elementId) {
            const textarea = document.getElementById(elementId);
            textarea.select();
            textarea.setSelectionRange(0, 99999);
            document.execCommand("copy");
            alert("Kopyalandı!");
        }
    </script>
}
